# CFlow Platform Repository

## Build & Deploy (October 2025)

**This repo uses automated build system** - push code triggers automatic build and deploy.

### GitHub Actions

**Workflows**: Located in `.github/workflows/` in THIS repo

**Runners**: Organization-level in `actions-runner-system` namespace

**Check status**:
```bash
kubectl get pods -n actions-runner-system
gh api orgs/baerautotech/actions/runners
```

### Building Images

**Use shared action**:
```yaml
- uses: baerautotech/cerebral-deployment/.github/actions/build-with-kaniko@main
  with:
    image-name: 'cerebral/<service>'
    dockerfile: 'infrastructure/docker/Dockerfile.<service>'
    context: '.'
```

**Action clones THIS repo** (cflow-platform) and builds from YOUR code.

### Registry

- Internal: `internal-registry.registry.svc.cluster.local:5000`
- External: `registry.dev.cerebral.baerautotech.com`

### Common Commands

```bash
# Trigger build
gh workflow run build-bmad-api.yml

# Watch build
gh run watch

# Check deployment
kubectl get pods -n cerebral-development -l app=bmad-api
```

### Documentation

**Quick start**: https://github.com/baerautotech/cerebral-deployment/blob/main/DEVELOPER_QUICK_START.md

### For Agents

**Do NOT**:
- ❌ Check `github-runners` namespace (old, terminating)
- ❌ Create workflows in cerebral-deployment repo
- ❌ Use manual Kaniko jobs

**DO**:
- ✅ Check `actions-runner-system` namespace
- ✅ Use workflows in THIS repo
- ✅ Use shared build-with-kaniko action
